import {
  __spreadProps,
  __spreadValues
} from "../chunk-FWCSY2DS.mjs";

// src/react17/index.tsx
import { useEffect, useState } from "react";
import { createTree } from "@headless-tree/core";
var useTree = (config) => {
  const [tree] = useState(() => ({ current: createTree(config) }));
  const [state, setState] = useState(
    () => tree.current.getState()
  );
  useEffect(() => {
    tree.current.rebuildTree();
  }, [tree]);
  tree.current.setConfig((prev) => __spreadProps(__spreadValues(__spreadValues({}, prev), config), {
    state: __spreadValues(__spreadValues({}, state), config.state),
    setState: (state2) => {
      var _a;
      setState(state2);
      (_a = config.setState) == null ? void 0 : _a.call(config, state2);
    }
  }));
  return tree.current;
};
export {
  useTree
};
